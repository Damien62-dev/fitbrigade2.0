{% extends "base.html" %}

{% block title %}Edit Goal - FitBrigade 2.0{% endblock %}

{% block content %}
<a href="/goal/{{ goal.id }}" class="back-link">‚Üê Back to Goal</a>
<br><br>

<h2>Edit Goal</h2>
<br>
<form method="POST" action="/edit_goal/{{ goal.id }}" id="goalForm">
    <label for="name">Name *</label>
    <input type="text" id="name" name="name" required placeholder="e.g., Do my first pull-up" value="{{ goal.name }}">
    <br><br>

    <label for="deadline">Deadline (optional)</label>
    <input type="date" id="deadline" name="deadline" value="{{ goal.deadline if goal.deadline else '' }}">
    <br><br>

    <label for="exercise">Related Exercise (optional)</label>
    <select id="exercise" name="exercise">
        <option value="">-- Not exercise-specific --</option>
        {% for muscle, exercise_list in all_exercises.items() %}
        <optgroup label="{{ muscle }}">
            {% for exercise in exercise_list %}
            <option value="{{ exercise.id }}" {% if goal.exercise_id==exercise.id %}selected{% endif %}>{{ exercise.name
                }}</option>
            {% endfor %}
        </optgroup>
        {% endfor %}
    </select>
    <br><br>

    <label for="target_weight">Target Weight (kg) (optional)</label>
    <input type="number" id="target_weight" name="target_weight" step="0.5" placeholder="e.g., 100"
        value="{{ goal.target_weight if goal.target_weight else '' }}">
    <br><br>

    <label for="target_reps">Target Reps (optional)</label>
    <input type="number" id="target_reps" name="target_reps" min="1" placeholder="e.g., 5"
        value="{{ goal.target_reps if goal.target_reps else '' }}">
    <br><br>

    <label for="notes">Description / Notes *</label><br>
    <textarea id="notes" name="notes" rows="4" required
        placeholder="Describe your goal and what success looks like...">{{ goal.notes if goal.notes else '' }}</textarea>
    <br><br>

    <div style="display: flex; gap: 10px;">
        <a href="/goal/{{ goal.id }}" class="btn-secondary">Cancel</a>
        <button type="submit" class="btn-primary">Save Changes</button>
    </div>
</form>
{% endblock %}